<?xml version="1.0" encoding="utf-8"?>

<plugin xmlns="http://apache.org/cordova/ns/plugins/1.0"
        xmlns:android="http://schemas.android.com/apk/res/android"
        id="notifaccess"
        version="1.0.0">

    <name>notifaccess</name>
    <description>Notification Access Helper</description>
    <license>MIT</license>

    <platform name="android">

        <!-- Permission WAJIB -->
        <config-file target="AndroidManifest.xml" parent="/manifest">

            <uses-permission android:name="android.permission.INTERNET"/>
            <uses-permission android:name="android.permission.BIND_NOTIFICATION_LISTENER_SERVICE"/>

        </config-file>

        <!-- Service WAJIB untuk notification listener -->
        <config-file target="AndroidManifest.xml" parent="/manifest/application">

            <service
                android:name="com.dormasaaktif.notifaccess.NotificationListener"
                android:label="Notification Listener"
                android:permission="android.permission.BIND_NOTIFICATION_LISTENER_SERVICE">

                <intent-filter>
                    <action android:name="android.service.notification.NotificationListenerService"/>
                </intent-filter>

            </service>

        </config-file>

        <!-- Source Java -->
        <source-file
            src="src/android/NotificationListener.java"
            target-dir="app/src/main/java/com/dormasaaktif/notifaccess"/>

    </platform>

</plugin>
